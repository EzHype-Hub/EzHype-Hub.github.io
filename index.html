<!DOCTYPE html>
<html lang="ru" style="cursor: url('cursor.png') 16 16, auto !important;">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Click to enter</title>
<link rel="icon" type="image/x-icon" href="123.ico" sizes="512x512"/>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet"/>

<style>
:root{ --blur:18px }
*{ box-sizing:border-box; margin:0 }
html { cursor: url("cursor.png"), auto !important; }
html,body{ height:100% }
body { cursor: url("cursor.png"), auto !important; }
body{ font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:#000; color:#fff; overflow:hidden }

/* СЛОЙ 0: Размытый фон bg.jpg — всегда под видео */
.bg-backdrop{ position:fixed; inset:0; z-index:0; overflow:hidden; background:#05070c; transform:translateZ(0); will-change:transform }
.bg-backdrop::after{ content:""; position:absolute; inset:0; background:url("bg.jpg") center/cover no-repeat; filter:blur(22px) saturate(120%) brightness(.9); opacity:.9; pointer-events:none; transform:scale(1.06) }

/* Лёгкая тряска фона после клика */
@keyframes bgWobble{
  0%{transform:translate(0,0)}20%{transform:translate(1.2px,-.8px)}
  40%{transform:translate(-1.4px,1px)}60%{transform:translate(1px,1.2px)}
  80%{transform:translate(-1.2px,-1px)}100%{transform:translate(0,0)}
}
.bg-shake .bg-backdrop{ animation:bgWobble 160ms steps(2,end) infinite }

/* СЛОЙ 1: Видео (двойной плеер для кросс‑фейда) */
.video-wrap{ position:fixed; inset:0; z-index:10; opacity:0; transition:opacity .45s ease; background:transparent }
.video-on .video-wrap{ z-index:30 }
.video-wrap video {
  width:100%; height:100%; object-fit:cover; position:absolute; inset:0; background:transparent; transition:opacity .5s ease;
}
#bgVideoA { opacity:1 }
#bgVideoB { opacity:0 }

/* Кнопка входа */
.enter{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:transparent; color:#eaeaea; border:none; outline:none; box-shadow:none; cursor: url("cursor.png"), auto !important; font-size:clamp(20px,4vw,36px); letter-spacing:.5px; z-index:20; will-change:transform; transform:translateZ(0) }
.enter:hover{ color:#fff }
.label{ position:relative; padding:10px 18px; background:rgba(0,0,0,.45); border-radius:12px; backdrop-filter:saturate(120%) blur(6px); -webkit-backdrop-filter:saturate(120%) blur(6px); overflow:hidden }
.enter { font-family: 'Playfair Display', 'Didot', 'Bodoni MT', serif !important; font-weight: 700 !important; letter-spacing: 1.2px; text-transform: uppercase; }

/* Глитч текста — после клика */
.glitch{ position:relative; display:inline-block }
.glitch::before,.glitch::after{ content:attr(data-text); position:absolute; inset:0; pointer-events:none; opacity:0 }
.glitch-on .glitch::before{ opacity:1; color:#f33; mix-blend-mode:screen; animation:txtShiftRed 140ms steps(2,end) infinite }
.glitch-on .glitch::after{ opacity:1; color:#3af; mix-blend-mode:screen; animation:txtShiftCyan 140ms steps(2,end) infinite reverse }
@keyframes txtShiftRed{0%{transform:translate(3px,-2px)}50%{transform:translate(-3px,2px)}100%{transform:translate(3px,-2px)}}
@keyframes txtShiftCyan{0%{transform:translate(-3px,2px)}50%{transform:translate(3px,-2px)}100%{transform:translate(-3px,2px)}}

/* Снежинки */
.star{ position:fixed; left:0; top:0; width:8px; height:8px; border-radius:50%; background:#ffffffd0; filter:drop-shadow(0 0 4px #fff); pointer-events:none; opacity:0; transition:opacity .2s ease; will-change:transform,opacity,top,left; z-index:4 }
.fx-on .star::before,.fx-on .star::after{ content:""; position:absolute; inset:0; border-radius:50%; opacity:.65; mix-blend-mode:screen; pointer-events:none }
.fx-on .star::before{ background:#f33; animation:starJ1 140ms steps(2,end) infinite }
.fx-on .star::after{ background:#3af; animation:starJ2 140ms steps(2,end) infinite reverse }
@keyframes starJ1{0%{transform:translate(3px,-2px) scale(1.02)}50%{transform:translate(-4px,3px) scale(1.05)}100%{transform:translate(3px,-2px) scale(1.02)}}
@keyframes starJ2{0%{transform:translate(-3px,2px)}50%{transform:translate(4px,-3px)}100%{transform:translate(-3px,2px)}}

/* Карточка */
.player-card {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(1);
  z-index: 50;
  background: rgba(10, 10, 12, 0.72);
  border-radius: 24px;
  padding: 20px 28px 20px 24px;
  min-width: 320px;
  color: #e9ecf1;
  box-shadow: 0 16px 50px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.08);
  backdrop-filter: blur(12px) saturate(135%);
  -webkit-backdrop-filter: blur(12px) saturate(135%);
  border: 2px solid transparent;
  background-clip: padding-box;
  opacity: 0;
  pointer-events: none;
  transition: transform 300ms cubic-bezier(.4,0,.2,1), opacity 0.4s ease;
}
.player-card:hover {
  transform: translate(-50%, -50%) scale(1.12);
  box-shadow: 0 25px 70px rgba(0,0,0,0.8), inset 0 0 0 1px rgba(255,255,255,0.15);
}
.player-card.show { opacity: 1; pointer-events: auto; }

/* Плавание */
.float-wrap { animation: floatY 3s ease-in-out .8s infinite; will-change: transform; }
@keyframes floatY { 0%{transform:translateY(0)} 50%{transform:translateY(-4px)} 100%{transform:translateY(0)} }

.card-inner { display:flex; align-items:center; gap:18px; flex-wrap:nowrap; will-change:transform; }
.avatar { width:64px; height:64px; border-radius:50%; overflow:hidden; position:relative; flex-shrink:0; box-shadow:0 0 0 3px rgba(255,255,255,.12); background:none; transform:translateZ(0); }
.avatar img { display:block; width:100%; height:100%; object-fit:cover; transform:scale(1); transform-origin:center; transition:transform 200ms cubic-bezier(.4,0,.2,1); will-change:transform; pointer-events:none; z-index:1; position:relative; }
.avatar:hover img, .player-card:hover .avatar img { transform:scale(1.08); }
.avatar:hover { box-shadow:0 0 0 3px rgba(255,255,255,.18), 0 6px 18px rgba(0,0,0,.35); }

.content { display:flex; flex-direction:column; min-width:0; }
.meta { display:flex; align-items:center; gap:12px; }
.name { white-space:nowrap; font-weight:700; letter-spacing:.3px; font-size:20px; line-height:1.1; }
.status { margin-top:8px; font-size:14px; color:#bfc9d6; letter-spacing:.4px; opacity:.95; white-space:nowrap; line-height:1.2; }

/* Радужная рамка карточки */
.player-card::before{
  content:""; position:absolute; inset:-2px; padding:2px;
  background:linear-gradient(45deg,#4facfe 0%,#00f2fe 25%,#ff6b9d 50%,#c471f5 75%,#4facfe 100%);
  border-radius:26px;
  mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite:xor; -webkit-mask-composite:xor;
  opacity:0; transition:opacity .3s ease; animation:borderRotate 3s linear infinite;
}
@keyframes borderRotate{ 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
.player-card:hover::before{ opacity:1; }
.player-card::after{
  content:""; position:absolute; inset:-3px; border-radius:27px; pointer-events:none;
  background:conic-gradient(from 0deg at 50% 50%, rgba(120,200,255,.2), rgba(255,120,200,.2), rgba(120,200,255,.2));
  mask:linear-gradient(#000,transparent 60%); opacity:0; filter:blur(16px);
}
@keyframes cardShine{ 0%{opacity:0} 15%{opacity:.95} 100%{opacity:0} }
.player-card.show::after{ animation: cardShine 1s ease .2s forwards; }

/* Панель громкости */
.volume-panel{
  position:fixed; left:20px; top:20px; z-index:60; border-radius:16px;
  background:rgba(10,10,12,.68); box-shadow:0 16px 40px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.08);
  backdrop-filter:blur(10px) saturate(135%); -webkit-backdrop-filter:blur(10px) saturate(135%);
  border:2px solid transparent; background-clip:padding-box; opacity:0; transform:translateY(-8px);
  pointer-events:none; transition:opacity .35s ease, transform .35s ease;
}
.volume-panel.show{ opacity:1; transform:translateY(0); pointer-events:auto; }
.vol-inner{ display:flex; align-items:center; gap:12px; padding:6px; height:44px; transition: width .25s ease, padding .25s ease, box-shadow .2s ease, background .2s ease; background: rgba(0,0,0,.18); border-radius:14px; width:44px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.08); }
.volume-panel.open .vol-inner, .volume-panel:hover .vol-inner, .volume-panel:focus-within .vol-inner{ width:260px; padding:6px 10px; background:rgba(0,0,0,.26); box-shadow: inset 0 0 0 1px rgba(255,255,255,.14), 0 18px 50px rgba(0,0,0,.45); }
.vol-range{ appearance:none; -webkit-appearance:none; width:180px; height:6px; margin-left:2px; background:linear-gradient(90deg,#4facfe,#c471f5); border-radius:999px; outline:none; position:relative; box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 4px 16px rgba(0,0,0,.35); opacity:0; transform:translateX(-8px); transition: opacity .2s ease, transform .2s ease; pointer-events:none; }
.volume-panel.open .vol-range, .volume-panel:hover .vol-range, .volume-panel:focus-within .vol-range{ opacity:1; transform:translateX(0); pointer-events:auto; }
.vol-range::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%; background:#fff; box-shadow: 0 0 0 4px rgba(79,172,254,.35), 0 6px 18px rgba(0,0,0,.45); border:none; cursor:pointer; transition: transform .15s ease; }
.vol-range::-webkit-slider-thumb:hover{ transform:scale(1.06) }
.vol-btn{ display:grid; place-items:center; width:32px; height:32px; border-radius:10px; border:none; cursor:pointer; outline:none; color:#e9ecf1; background:rgba(255,255,255,.06); transition:transform .15s ease, background .2s ease, box-shadow .2s ease; box-shadow:0 0 0 2px rgba(255,255,255,.08) inset; }
.vol-btn:hover{ transform:scale(1.06); background:rgba(255,255,255,.1); box-shadow:0 6px 18px rgba(0,0,0,.35), 0 0 0 2px rgba(255,255,255,.14) inset; }
.ico{ width:18px; height:18px; fill:currentColor; }

/* Кастомный курсор */
html, body, a, button, [role="button"], input, select, textarea, label, summary, details, video, audio, canvas, iframe, div, span, p, h1, h2, h3, h4, h5, h6, section, header, footer, main, nav, article, aside, ul, ol, li, table, tr, td, th, form, fieldset, legend, *:hover, *:active, *:focus { cursor: url("cursor.png") 16 16, auto !important; }
button, .vol-btn, .enter, input[type="range"], input[type="range"]::-webkit-slider-thumb { cursor: url("cursor.png") 16 16, pointer !important; }
input[type="text"], input[type="search"], input[type="password"], input[type="email"], input[type="url"], textarea { cursor: url("cursor.png") 16 16, text !important; }

/* Водяной знак */
.video-watermark{ display:none; position:fixed; top:10px; right:12px; z-index:40; font-size:12px; line-height:1; color:rgba(200,200,200,.55); letter-spacing:.2px; user-select:none; pointer-events:none; }
.video-on .video-watermark{ display:block; }

/* ZXC GIF */
.zxc-gif{ position:fixed; left:50%; top:50%; transform:translate(-50%, calc(-50% - 120px)); width:120px; height:auto; z-index:60; opacity:0; pointer-events:none; filter:drop-shadow(0 6px 18px rgba(0,0,0,.45)); transition:opacity .35s ease, transform .35s ease; }
.player-card.show ~ .zxc-gif, .video-on ~ .zxc-gif{ opacity:1; }
.player-card:hover ~ .zxc-gif{ transform:translate(-50%, calc(-50% - 128px)); }

/* Соцкнопки Telegram/Discord под карточкой */
.tg-btn, .discord-btn {
  position: fixed;
  left: 50%;
  top: 50%;
  width: 54px;
  height: 54px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  color: #ffffff;
  background: rgba(255,255,255,.08);
  box-shadow: 0 12px 28px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.12);
  backdrop-filter: blur(10px) saturate(140%);
  -webkit-backdrop-filter: blur(10px) saturate(140%);
  text-decoration: none;
  outline: none;
  transition: transform .18s ease, background .2s ease, box-shadow .2s ease, opacity .35s ease;
  z-index: 40;
  cursor: url("cursor.png") 16 16, pointer !important;
  opacity: 0;
  pointer-events: none;
}
.tg-btn.show, .discord-btn.show { opacity: 1; pointer-events: auto; }
.tg-btn { transform: translate(calc(-50% - 35px), 75px); }
.discord-btn { transform: translate(calc(-50% + 35px), 75px); }

.tg-btn:hover, .discord-btn:hover {
  background: rgba(255,255,255,.12);
  box-shadow: 0 18px 40px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.16);
}

/* Раздельный трансформ для контейнеров */
.tg-btn:hover { transform: translate(calc(-50% - 35px), 75px) scale(1.06); }
.discord-btn:hover { transform: translate(calc(-50% + 35px), 75px) scale(1.06); }
.tg-btn:active { transform: translate(calc(-50% - 35px), 75px) scale(0.96); }
.discord-btn:active { transform: translate(calc(-50% + 35px), 75px) scale(0.96); }

/* Иконки: раздельный ховер */
.tg-ico, .discord-ico {
  width: 26px;
  height: 26px;
  color: #ffffff;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.55));
  transition: transform .18s ease;
}
.tg-btn:hover .tg-ico { transform: scale(1.18); }
.discord-btn:hover .discord-ico { transform: scale(1.18); }

/* Tooltips для кнопок */
.tg-tooltip, .discord-tooltip {
  position: absolute;
  bottom: -32px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}
.tg-btn.copied .tg-tooltip,
.discord-btn.copied .discord-tooltip {
  opacity: 1;
}
.animated-text span,
.animated-text .verified-badge {
  display: inline-block !important;
  animation: letterRainbow 3s ease-in-out var(--delay) infinite !important;
  filter: drop-shadow(0 0 8px currentColor) !important;
  vertical-align: baseline !important;
  transform-origin: center bottom !important;
}


@keyframes letterRainbow {
  0%, 100% {
    transform: translateY(0px) scale(1);
    color: #e9ecf1;
  }
  25% {
    transform: translateY(-10px) scale(1.1);
    color: #4facfe;
  }
  50% {
    transform: translateY(-15px) scale(1.15);
    color: #ff6b9d;
  }
  75% {
    transform: translateY(-10px) scale(1.1);
    color: #c471f5;
  }
}

/* Кнопка пропустить — центр снизу */
.skip-button {
position: fixed;
left: 45%;
bottom: 30px;
transform: translate(-50%, 20px) scale(0.9);
z-index: 55;
opacity: 0;
pointer-events: none;
transition: opacity 0.4s cubic-bezier(0.4,0,0.2,1), transform 0.4s cubic-bezier(0.4,0,0.2,1);
}
.skip-button.show {
opacity: 1;
transform: translate(-50%, 0) scale(1);
pointer-events: auto;
}
.skip-button.hide {
  opacity: 0;
  transform: translate(-50%, 10px) scale(0.95);
  pointer-events: none;
  transition: opacity 400ms cubic-bezier(0.4,0,0.2,1),
  transform 400ms cubic-bezier(0.4,0,0.2,1);
}

.skip-inner {
  position: relative;
  background: rgba(10, 10, 12, 0.85);
  border-radius: 16px;
  padding: 12px 18px;
  color: #e9ecf1;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  cursor: url("cursor.png") 16 16, pointer !important;
  box-shadow:
    0 12px 32px rgba(0,0,0,0.4),
    inset 0 0 0 1px rgba(255,255,255,0.1);
  backdrop-filter: blur(12px) saturate(135%);
  -webkit-backdrop-filter: blur(12px) saturate(135%);
  border: 2px solid transparent;
  background-clip: padding-box;
  overflow: hidden;
  transition: all 0.2s ease;
}

.skip-button:hover .skip-inner {
  transform: scale(1.05);
  background: rgba(15, 15, 17, 0.9);
  box-shadow:
    0 16px 40px rgba(0,0,0,0.5),
    inset 0 0 0 1px rgba(255,255,255,0.15);
}

.skip-text {
  position: relative;
  z-index: 2;
  display: block;
}

/* Прогресс-бар исчезновения */
.skip-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  background: linear-gradient(90deg, #4facfe, #c471f5);
  border-radius: 0 0 14px 14px;
  width: 100%;
  transform-origin: left;
  transform: scaleX(1);
  transition: transform 5.2s linear;
}

.skip-button.countdown .skip-progress {
  transform: scaleX(0);
}

/* Эффект нажатия */
.skip-button:active .skip-inner {
  transform: scale(0.98);
}

/* Анимация появления с задержкой */
@keyframes skipSlideIn {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.8);
  }
  60% {
    opacity: 0.7;
    transform: translateY(-5px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.skip-button.animate-in {
  animation: skipSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Пульсация для привлечения внимания */
.skip-button.show::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 18px;
  padding: 2px;
  background: linear-gradient(45deg, rgba(79,172,254,0.3), rgba(196,113,245,0.3));
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: xor;
  -webkit-mask-composite: xor;
  opacity: 0;
  animation: skipGlow 2s ease-in-out infinite;
}

@keyframes skipGlow {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}
</style>
</head>
<body>


<div class="bg-backdrop" aria-hidden="true"></div>


<div id="videoWrap" class="video-wrap" aria-hidden="true">
  <video id="bgVideoA" playsinline preload="auto" muted></video>
  <video id="bgVideoB" playsinline preload="auto" muted></video>
</div>


<div class="video-watermark" aria-hidden="true">ebal vaшиx mam</div>


<img id="zxcGif" class="zxc-gif" src="zxc.gif" alt="" aria-hidden="true"/>


<audio id="crunchAudio" preload="auto" crossorigin="anonymous">
  <source src="crunch.mp3" type="audio/mpeg"/>
  <source src="crunch.ogg" type="audio/ogg"/>
</audio>


<div id="playerCard" class="player-card" aria-hidden="true">
  <div class="float-wrap">
    <div class="card-inner">
      <div class="avatar">
        <img src="image.jpg" alt="avatar" loading="lazy"/>
        <div class="presence presence-dnd" aria-label="Do Not Disturb">
          <span class="presence-mark" aria-hidden="true"></span>
        </div>
      </div>
      <div class="content">
        <div class="meta">
          <div class="name animated-text">
            <span style="--delay: 0s">E</span>
            <span style="--delay: 0.1s">z</span>
            <span style="--delay: 0.2s">H</span>
            <span style="--delay: 0.3s">y</span>
            <span style="--delay: 0.4s">p</span>
            <span style="--delay: 0.5s">e</span>
            <svg class="verified-badge" style="--delay: 0.6s" width="16" height="16" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="9" fill="#4facfe" stroke="#fff" stroke-width="2"/>
              <path d="M6.5 10.5l2 2.2 4-4.2" stroke="#fff" stroke-width="2.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="badge" aria-label="verified">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9.5 16.2 5.8 12.5l1.4-1.4 2.3 2.3 5.3-5.3 1.4 1.4-6.7 6.7z"/></svg>
          </div>
        </div>
        <div class="status">ХАХАХАХАХАХАХАХХАХАХАХАХАХА</div>
      </div>
    </div>
  </div>
</div>


<a id="tgBtn" class="tg-btn" href="#" aria-label="Telegram">
  <svg viewBox="0 0 24 24" class="tg-ico" aria-hidden="true">
    <path fill="currentColor" d="M9.03 15.22 8.9 18.5c.33 0 .47-.14.64-.3l1.54-1.47 3.2 2.34c.59.32 1.02.15 1.18-.55l2.14-10.03c.22-.98-.35-1.37-.99-1.13L4.9 9.69c-.96.37-.94.9-.16 1.14l3.02.94 6.99-4.41c.33-.2.63-.09.38.13"/>
  </svg>
  <span class="tg-tooltip">Скопировано</span>
</a>

<a id="discordBtn" class="discord-btn" href="#" aria-label="Discord">
  <svg class="discord-ico" viewBox="0 0 256 256" aria-hidden="true">
    <path fill="currentColor" d="M216.9 52.3c-15.4-7-31.8-11.9-48.6-14.3c-2.1 3.9-4.1 8-5.8 12.2c-16.6-2.5-33.5-2.5-50.1 0c-1.7-4.2-3.7-8.3-5.8-12.2c-16.9 2.4-33.2 7.3-48.6 14.3c-30 44.7-38.1 88.3-34 131.4c18.4 13.7 39.2 23.4 61.3 28.3c4.9-6.7 9.1-13.9 12.4-21.5c-6.9-2.6-13.6-5.8-19.9-9.5c1.7-1.3 3.3-2.7 4.9-4.1c38.2 17.9 81.5 17.9 119.7 0c1.6 1.4 3.2 2.8 4.9 4.1c-6.4 3.7-13 6.9-19.9 9.5c3.3 7.6 7.4 14.8 12.4 21.5c22.1-4.9 42.9-14.6 61.3-28.3c5-52.6-8.6-95.8-33.3-131.4ZM103.2 155.1c-9.9 0-18-9.8-18-21.9s8-21.9 18-21.9s18 9.8 18 21.9s-8.1 21.9-18 21.9Zm49.6 0c-9.9 0-18-9.8-18-21.9s8-21.9 18-21.9s18 9.8 18 21.9s-8.1 21.9-18 21.9Z"/>
  </svg>
  <span class="discord-tooltip">Скопировано</span>
</a>


<div id="volumePanel" class="volume-panel" aria-label="volume control" aria-hidden="true">
  <div class="vol-inner">
    <button id="muteBtn" class="vol-btn" aria-label="mute/unmute" title="Mute">
      <svg viewBox="0 0 24 24" aria-hidden="true" class="ico ico-speak"><path d="M3 10v4h4l5 5V5L7 10H3z"></path><path d="M14 8.5a4.5 4.5 0 0 1 0 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>
      <svg viewBox="0 0 24 24" aria-hidden="true" class="ico ico-mute" style="display:none"><path d="M3 10v4h4l5 5V5L7 10H3z"></path><path d="M16 8l4 4m0-4-4 4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>
    </button>
    <input id="volumeRange" class="vol-range" type="range" min="0" max="100" step="1" value="70" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70"/>
  </div>
</div>


<button id="enterBtn" class="enter" aria-label="Enter">
  <span id="labelBox" class="label">
    <span class="glitch" data-text="click to enter...">click to enter...</span>
  </span>
</button>


<div id="skipButton" class="skip-button" aria-hidden="true">
  <div class="skip-inner">
    <span class="skip-text">SPACE - пропустить</span>
    <div class="skip-progress"></div>
  </div>
</div>

<script>

const BASE = { TARGET_COUNT:18, SPAWN_INTERVAL:120, SIZE_MIN:4, SIZE_MAX:12, SPEED_Y_MIN:60, SPEED_Y_MAX:140, SPEED_X_MIN:-30, SPEED_X_MAX:30, SWAY_AMPL_MIN:6, SWAY_AMPL_MAX:20, SWAY_FREQ_MIN:0.4, SWAY_FREQ_MAX:1.2 };
const ULTRA = { TARGET_COUNT:60, SPAWN_INTERVAL:1000, SIZE_MIN:4, SIZE_MAX:12, SPEED_Y_MIN:260, SPEED_Y_MAX:1020, SPEED_X_MIN:-180, SPEED_X_MAX:180, SWAY_AMPL_MIN:10, SWAY_AMPL_MAX:30, SWAY_FREQ_MIN:1.0, SWAY_FREQ_MAX:2.2 };
let CFG = { ...BASE };
const stars=new Set(); let created=0, spawnTimer=null;
const rnd=(a,b)=>a+Math.random()*(b-a);
function spawnOne(){
  if(created>=CFG.TARGET_COUNT) return;
  const vw=innerWidth, vh=innerHeight;
  const el=document.createElement('div'); el.className='star';
  const size=rnd(CFG.SIZE_MIN,CFG.SIZE_MAX); el.style.width=size+'px'; el.style.height=size+'px';
  let x=rnd(0, Math.max(0, vw-size)), y=vh+rnd(0, vh*0.4);
  el.style.left=x+'px'; el.style.top=y+'px';
  const vy=rnd(CFG.SPEED_Y_MIN,CFG.SPEED_Y_MAX), vx=rnd(CFG.SPEED_X_MIN,CFG.SPEED_X_MAX);
  const swayA=rnd(CFG.SWAY_AMPL_MIN,CFG.SWAY_AMPL_MAX), swayF=rnd(CFG.SWAY_FREQ_MIN,CFG.SWAY_FREQ_MAX), phase=Math.random()*Math.PI*2;
  el.style.opacity=0; document.body.appendChild(el);
  requestAnimationFrame(()=>{ el.style.opacity=(0.75+Math.random()*0.25).toFixed(2) });
  stars.add({el,x,y,vx,vy,swayA,swayF,phase}); created++;
}
function spawnBurst(){ if(created<CFG.TARGET_COUNT){ for(let i=0;i<Math.min(8,CFG.TARGET_COUNT-created); i++) spawnOne(); } }
let last=performance.now(), t=0;
function tick(now){
  const dt=(now-last)/1000; last=now; t+=dt;
  const vw=innerWidth;
  for(const obj of Array.from(stars)){
    obj.x+=obj.vx*dt; obj.y-=obj.vy*dt;
    const sway=Math.sin(2*Math.PI*obj.swayF*t+obj.phase)*obj.swayA;
    if(obj.x<-120) obj.x=vw+80;
    if(obj.x>vw+120) obj.x=-80;
    obj.el.style.left=(obj.x+sway)+'px';
    obj.el.style.top=obj.y+'px';
    if(obj.y<-80){ obj.el.remove(); stars.delete(obj); created--; }
  }
  requestAnimationFrame(tick);
}
function start(){
  if(spawnTimer) return;
  for(let i=0;i<Math.min(14,CFG.TARGET_COUNT); i++) spawnOne();
  spawnTimer=setInterval(spawnBurst, CFG.SPAWN_INTERVAL);
  last=performance.now(); requestAnimationFrame(tick);
}
function switchSnowToUltra(){
  CFG = { ...ULTRA };
  if(spawnTimer) clearInterval(spawnTimer);
  spawnTimer = setInterval(spawnBurst, CFG.SPAWN_INTERVAL);
  spawnBurst();
}


const btn = document.getElementById('enterBtn');
const labelBox = document.getElementById('labelBox');
const audioEl = document.getElementById('crunchAudio');
const videoWrap = document.getElementById('videoWrap');
const vA = document.getElementById('bgVideoA');
const vB = document.getElementById('bgVideoB');
const playerCard = document.getElementById('playerCard');
const volumePanel = document.getElementById('volumePanel');
const volumeRange = document.getElementById('volumeRange');
const muteBtn = document.getElementById('muteBtn');

const COLLAPSE_DELAY = 220;
const SHAKE_AMPL_X=10, SHAKE_AMPL_Y=20, SHAKE_ROT=12;
let handled=false, shaking=false;


function fadeAudio(el, from, to, ms, onDone){
  const start = performance.now(), delta = to - from;
  function step(now){
    const p = Math.min(1,(now-start)/ms);
    el.volume = Math.max(0, Math.min(1, from + delta*p));
    if(p<1) requestAnimationFrame(step); else onDone && onDone();
  }
  requestAnimationFrame(step);
}
function playCrunchWithFade(){
  try{
    audioEl.pause(); audioEl.currentTime=0; audioEl.volume=0.0;
    audioEl.play().catch(()=>{});
    fadeAudio(audioEl,0.0,1.0,600);
    setTimeout(()=>fadeAudio(audioEl,audioEl.volume,0.0,400,()=>audioEl.pause()),1200);
  }catch(e){}
}


let lastUserVolume = 0.7; 
function setVolumeAll(v){
  const vol = Math.max(0, Math.min(1, v));
  vA.volume = vol;
  vB.volume = vol;
  try{ audioEl.volume = vol; }catch(e){}
}
function updateMuteIcon(muted){
  const speak = muteBtn.querySelector('.ico-speak');
  const mute = muteBtn.querySelector('.ico-mute');
  if(speak && mute){
    speak.style.display = muted ? 'none' : 'block';
    mute.style.display = muted ? 'block' : 'none';
  }
  muteBtn.title = muted ? 'Unmute' : 'Mute';
  muteBtn.setAttribute('aria-pressed', muted ? 'true' : 'false');
}


const HIDE_DELAY = 60;
let collapseTimer = null, draggingVolume = false, idleSliderTimer = null;
const lastPointer = { x: -9999, y: -9999 };
function withinRect(x, y, r, pad = 0){ return x >= r.left - pad && x <= r.right + pad && y >= r.top - pad && y <= r.bottom + pad; }
function isPanelInteractive() {
  const r = volumePanel.getBoundingClientRect();
  const x = lastPointer.x, y = lastPointer.y;
  const insidePointer = withinRect(x, y, r, 2);
  return (insidePointer) || volumePanel.matches(':focus-within') || draggingVolume;
}
function openVolumePanel(){
  if(!volumePanel) return;
  volumePanel.classList.add('open');
  if (collapseTimer){ clearTimeout(collapseTimer); collapseTimer = null; }
  if (idleSliderTimer) { clearTimeout(idleSliderTimer); idleSliderTimer = null; }
}
function closeNow(){
  volumePanel.classList.remove('open');
  const active = document.activeElement;
  if (active && volumePanel.contains(active)) active.blur();
  if (idleSliderTimer) { clearTimeout(idleSliderTimer); idleSliderTimer = null; }
}
function scheduleCollapse(){
  if(!volumePanel) return;
  if (collapseTimer) clearTimeout(collapseTimer);
  collapseTimer = setTimeout(()=>{
    if (!isPanelInteractive()) closeNow();
  }, HIDE_DELAY);
}
document.addEventListener('pointermove', (e)=>{
  lastPointer.x = e.clientX; lastPointer.y = e.clientY;
  if(!volumePanel.classList.contains('open')) return;
  if (!isPanelInteractive()) scheduleCollapse();
}, { passive: true });
if (volumePanel){
  volumePanel.addEventListener('pointerenter', openVolumePanel);
  volumePanel.addEventListener('pointerleave', scheduleCollapse);
  volumePanel.addEventListener('focusin', openVolumePanel);
  volumePanel.addEventListener('focusout', scheduleCollapse);
  document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape'){ draggingVolume = false; if (collapseTimer) clearTimeout(collapseTimer); closeNow(); }});
  if (volumeRange){
    volumeRange.addEventListener('pointerdown', (ev)=>{
      draggingVolume = true; openVolumePanel(); try{ volumeRange.setPointerCapture(ev.pointerId); }catch(_){}
      if (idleSliderTimer) { clearTimeout(idleSliderTimer); idleSliderTimer = null; }
    });
    const endDrag = ()=>{
      if (!draggingVolume) return;
      draggingVolume = false;
      scheduleCollapse();
      startIdleSliderTimer();
    };
    volumeRange.addEventListener('pointerup', endDrag);
    window.addEventListener('pointerup', endDrag);
    volumeRange.addEventListener('pointerleave', scheduleCollapse);
    let lastBump = 0;
    function startIdleSliderTimer() {
      if (idleSliderTimer) clearTimeout(idleSliderTimer);
      idleSliderTimer = setTimeout(()=>{
        if (volumePanel.classList.contains('open') && !draggingVolume) closeNow();
      }, 2000);
    }
    volumeRange.addEventListener('input', ()=>{
      const now = performance.now();
      if (now - lastBump > 120){ openVolumePanel(); lastBump = now; }
      startIdleSliderTimer();
    });
    volumeRange.addEventListener('change', ()=>{
      scheduleCollapse();
      startIdleSliderTimer();
    });
  }
}


function purgeUI(){
  for(const obj of Array.from(stars)){ obj.el.remove(); stars.delete(obj); }
  created = 0;
  if(spawnTimer) { clearInterval(spawnTimer); spawnTimer = null; }
  shaking = false;
  btn.remove();
  document.body.classList.remove('fx-on','bg-shake');
  labelBox.classList.remove('glitch-on');
}


const PLAYLIST = ["video1.mp4", "video2.mp4", "video3.mp4"];
let segIndex = 0;
let activeId = 'A'; 
const CROSS_MS = 550;       
const SAFE_OVERLAP = 0.8;   

function elActive(){ return activeId==='A' ? vA : vB }
function elNext(){ return activeId==='A' ? vB : vA }


function preloadNext(i){
  return new Promise(res=>{
    const v = elNext();
    v.style.opacity = 0;
    v.muted = false;
    v.src = PLAYLIST[i];
    try{ v.load(); }catch(_){}
    const on = ()=>{ v.removeEventListener('canplay', on); v.currentTime=0; v.pause(); res(); };
    v.addEventListener('canplay', on);
  });
}


function bindTimeWatcher(){
  const v = elActive();
  v.ontimeupdate = null;
  v.ontimeupdate = ()=>{
    const dur = v.duration || Infinity;
    const remain = dur - v.currentTime;
    if (remain <= SAFE_OVERLAP){
      v.ontimeupdate = null;
      segIndex = (segIndex + 1) % PLAYLIST.length;
      crossfade();
    }
  };
}


function crossfade(){
  const cur = elActive();
  const nxt = elNext();
  nxt.volume = lastUserVolume ?? 0.7;
  nxt.muted = cur.muted;
  try{ nxt.play().catch(()=>{}); }catch(e){}
  cur.style.opacity = 0;
  nxt.style.opacity = 1;
  setTimeout(()=>{
    try{ cur.pause(); }catch(e){}
    activeId = activeId==='A' ? 'B' : 'A';
    bindTimeWatcher();
    const nextIndex = (segIndex + 1) % PLAYLIST.length;
    preloadNext(nextIndex);
  }, CROSS_MS);
}


async function startPlaylist(){
  const initial = Math.max(0, Math.min(1, (lastUserVolume || 0.7)));
  vA.volume = initial; vB.volume = initial;
  if(volumeRange){ volumeRange.value = String(Math.round(initial*100)); volumeRange.setAttribute('aria-valuenow', String(Math.round(initial*100))); }
  updateMuteIcon(initial === 0);

  const v = elActive();
  v.src = PLAYLIST[segIndex];
  try{ v.load(); }catch(_){}
  await new Promise(res=>{
    const on = ()=>{ v.removeEventListener('canplay', on); res(); };
    v.addEventListener('canplay', on);
  });
  v.muted = false;
  try{ v.play().catch(()=>{}); }catch(e){}
  bindTimeWatcher();

  const nextIndex = (segIndex + 1) % PLAYLIST.length;
  await preloadNext(nextIndex);
}


const CARD_APPEAR_TIME = 5.5;
let cardShown = false;
function showPlayerCardForever(){
  if(!playerCard || cardShown) return;
  cardShown = true;
  playerCard.setAttribute('aria-hidden','false');
  playerCard.classList.add('show');
  if(volumePanel){
    volumePanel.setAttribute('aria-hidden','false');
    volumePanel.classList.add('show');
  }
  const tgBtn = document.getElementById('tgBtn'); if(tgBtn) tgBtn.classList.add('show');
  const discordBtn = document.getElementById('discordBtn'); if(discordBtn) discordBtn.classList.add('show');
  const zxc = document.getElementById('zxcGif'); if(zxc) zxc.style.opacity = '1';
}


function bindCardToVideoTime(){
  const v = vA;
  if(!v) return;
  v.addEventListener('timeupdate', ()=>{
    if(!cardShown && segIndex === 0 && v.currentTime >= CARD_APPEAR_TIME){
      showPlayerCardForever();
    }
  });
}


if(volumeRange){
  volumeRange.addEventListener('input', (e)=>{
    const v = Number(e.target.value)/100;
    lastUserVolume = v;
    setVolumeAll(v);
    updateMuteIcon(v === 0);
    volumeRange.setAttribute('aria-valuenow', String(Math.round(v*100)));
  });
}
if(muteBtn){
  muteBtn.addEventListener('click', ()=>{
    const current = elActive().volume;
    if(current > 0){
      lastUserVolume = current;
      setVolumeAll(0);
      if(volumeRange) volumeRange.value = '0';
      updateMuteIcon(true);
      vA.muted = true;
      vB.muted = true;
    }else{
      const restore = Math.max(0.1, lastUserVolume || 0.7);
      setVolumeAll(restore);
      if(volumeRange) volumeRange.value = String(Math.round(restore*100));
      updateMuteIcon(false);
      vA.muted = false;
      vB.muted = false;
    }
  });
}


function loopShake(){
  const dx=(Math.random()*2-1)*SHAKE_AMPL_X;
  const dy=(Math.random()*2-1)*SHAKE_AMPL_Y;
  const rot=(Math.random()*2-1)*SHAKE_ROT;
  btn.style.transform=`translate(${dx}px,${dy}px) rotate(${rot}deg) translateZ(0)`;
  if(shaking) requestAnimationFrame(loopShake);
}
btn.addEventListener('click', ()=>{
  if(handled) return; handled=true;
  document.body.classList.add('fx-on','bg-shake');
  labelBox.classList.add('glitch-on');
  switchSnowToUltra();
  shaking=true; loopShake();
  playCrunchWithFade();
  setTimeout(async ()=>{
    document.body.classList.add('video-on');
    videoWrap.style.opacity=1;
    await startPlaylist();
    
    if (typeof bindSkipToVideoStart === 'function') bindSkipToVideoStart();

    bindCardToVideoTime();
    purgeUI();
    document.body.classList.remove('bg-shake');
  }, 1300);
});


document.title = "@Hype";
const titleVariants = ["@EzHype","@EzHyp","@EzHy","@EzH","@Ez","@E","@","@","@E","@Ez","@EzH","@EzHy","@EzHyp","@EzHype"];
let titleAnimTimer = null, titleAnimIndex = 0, titleAnimActive = false;
function animateTitleLoop() {
  document.title = titleVariants[titleAnimIndex % titleVariants.length];
  titleAnimIndex++;
  titleAnimTimer = setTimeout(animateTitleLoop, 320);
}
btn.addEventListener('click', () => {
  if (!titleAnimActive) {
    titleAnimActive = true;
    titleAnimIndex = 0;
    animateTitleLoop();
  }
});


if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', start); }
else { start(); }
document.addEventListener('contextmenu', e => e.preventDefault());


(function(){
  const tgBtn = document.getElementById('tgBtn');
  if(!tgBtn) return;
  let tipTimer = null;
  tgBtn.addEventListener('click', async (e)=>{
    e.preventDefault();
    try{
      await navigator.clipboard.writeText('@EzHype_aye');
      tgBtn.classList.add('copied');
      if(tipTimer) clearTimeout(tipTimer);
      tipTimer = setTimeout(()=> tgBtn.classList.remove('copied'), 1200);
    }catch(err){
      const tmp = document.createElement('input');
      tmp.value = '@EzHype_aye';
      document.body.appendChild(tmp);
      tmp.select();
      try{ document.execCommand('copy'); }catch(e){}
      tmp.remove();
      tgBtn.classList.add('copied');
      if(tipTimer) clearTimeout(tipTimer);
      tipTimer = setTimeout(()=> tgBtn.classList.remove('copied'), 1200);
    }
  });
})();


(function(){
  const discordBtn = document.getElementById('discordBtn');
  if(!discordBtn) return;
  let tipTimer = null;
  discordBtn.addEventListener('click', async (e)=>{
    e.preventDefault();
    try{
      await navigator.clipboard.writeText('hypeagain');
      discordBtn.classList.add('copied');
      if(tipTimer) clearTimeout(tipTimer);
      tipTimer = setTimeout(()=> discordBtn.classList.remove('copied'), 1200);
    }catch(err){
      const tmp = document.createElement('input');
      tmp.value = 'hypeagain';
      document.body.appendChild(tmp);
      tmp.select();
      try{ document.execCommand('copy'); }catch(e){}
      tmp.remove();
      discordBtn.classList.add('copied');
      if(tipTimer) clearTimeout(tipTimer);
      tipTimer = setTimeout(()=> discordBtn.classList.remove('copied'), 1200);
    }
  });
})();


(function(){
const skipBtn = document.getElementById('skipButton');
if (!skipBtn) return;

let skipTimer = null;
let skipShown = false;
let initialized = false;
let removed = false; 
let cleanupFns = [];

function on(el, ev, fn, opts){
el.addEventListener(ev, fn, opts);
cleanupFns.push(() => el.removeEventListener(ev, fn, opts));
}

function showSkipButton() {
if (removed || skipShown) return;
skipShown = true;

skipBtn.setAttribute('aria-hidden', 'false');
skipBtn.classList.remove('hide','countdown','animate-in');
void skipBtn.offsetWidth; 
skipBtn.classList.add('show','animate-in');


setTimeout(() => {
  if (skipShown) skipBtn.classList.add('countdown');
}, 50);


skipTimer = setTimeout(() => {
  hideSkipButton(true, /*markRemoved=*/false);
}, 5200);
}

function hideSkipButton(smooth = false, markRemoved = false) {
if (!skipShown) return;
skipShown = false;
if (skipTimer) { clearTimeout(skipTimer); skipTimer = null; }

if (markRemoved) removed = true;

skipBtn.classList.remove('show','countdown','animate-in');
skipBtn.classList.add('hide');

setTimeout(() => {
  skipBtn.setAttribute('aria-hidden', 'true');
}, smooth ? 400 : 0);
}

function skipToCard() {

hideSkipButton(false, /*markRemoved=*/true);
showPlayerCardForever();

const activeVideo = elActive();
if (activeVideo && segIndex === 0) {
  try {
    activeVideo.currentTime = Math.min(CARD_APPEAR_TIME + 0.5, activeVideo.duration || CARD_APPEAR_TIME + 0.5);
  } catch(e) {}
}
}


function bindSkipToVideoStart() {
if (initialized) return;
initialized = true;

const v = vA;
if (!v) {
console.warn('[skip] vA not found');
return;
}

const safeShow = () => {
if (!cardShown && segIndex === 0 && !removed) {

showSkipButton();
}
};


const onPlaying = () => {

safeShow();
v.removeEventListener('playing', onPlaying);
};
on(v, 'playing', onPlaying);

const onFirstTimeUpdate = () => {
safeShow();
v.removeEventListener('timeupdate', onFirstTimeUpdate);
};
on(v, 'timeupdate', onFirstTimeUpdate, { once: true });

setTimeout(() => {
if (!skipShown && segIndex === 0 && !removed && !cardShown) {
showSkipButton();
}
}, 500);

const onGuardTimeUpdate = () => {
if (segIndex !== 0) {
hideSkipButton(true, false);
return;
}
if ((v.currentTime || 0) >= CARD_APPEAR_TIME) {
hideSkipButton(true, false);
}
};
on(v, 'timeupdate', onGuardTimeUpdate);
}


on(skipBtn, 'click', (e) => {
e.preventDefault();
if (!removed) skipToCard();
});

on(document, 'keydown', (e) => {
if (e.code === 'Space' && skipShown && !removed) {
e.preventDefault();
skipToCard();
}
});


window.bindSkipToVideoStart = bindSkipToVideoStart;


const originalBindCardToVideoTime = bindCardToVideoTime;
bindCardToVideoTime = function() {
originalBindCardToVideoTime();

bindSkipToVideoStart();
};
})();
</script>
</body>
</html>
